<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Love Danmu</title>
<style>
#container {
  position: relative; 
  width: 100%;
  height: 300px;
  background: url('bg.jpg') no-repeat; 
  background-size: cover;
}

.danmu {
  position: absolute;
  white-space: nowrap;
  font-size: 20px;
  font-weight: bold;
}

.music {
  position: fixed;
  bottom: 20px;
  right: 20px; 
}
</style>
</head>
<body>

<div id="container"></div>

<audio src="music.mp3" class="music" autoplay controls loop></audio>

<script>

var danmus = [];

// 随机添加弹幕
for (var i = 0; i < 30; i++) {
  danmus.push({
    text: '潘烨我爱你',
    x: Math.random() * 100 + '%',
    y: Math.random() * 100 + '%',
  });
}

// 渲染弹幕 
function renderDanmu() {
  
  var container = document.getElementById('container');
  container.innerHTML = '';
  
  danmus.forEach(function(danmu) {
    
    var el = document.createElement('div'); 
    el.className = 'danmu';
    el.innerText = danmu.text;
    el.style.left = danmu.x;
    el.style.top = danmu.y;
    
    container.appendChild(el);
    
  });
  
}

renderDanmu();

// 滚动弹幕
setInterval(function() {
  danmus.push({
    text: '潘烨我爱你',
    x: '-' + Math.random() * 20 + '%', 
    y: Math.random() * 100 + '%'
  });
  renderDanmu();
}, 1000);

</script>

</body>
</html>
